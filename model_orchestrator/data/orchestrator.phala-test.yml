logging:
  level: debug

infrastructure:
  database:
    type: sqlite
    path: "model_orchestrator/data/orchestrator-phala-test.db"

  publishers:
    - type: websocket
      address: "0.0.0.0"
      port: 9091

  runner:
    type: phala
    cluster-name: "bird-tracker"
    phala-api-url: "https://cloud-api.phala.network"
    registry-compose-path: "model_orchestrator/data/docker-compose.phala.registry.yml"
    runner-compose-path: "model_orchestrator/data/docker-compose.phala.runner.yml"
    cluster-urls:  # Fallback for local dev (used when cluster-name is empty or Phala API unavailable)
      - "https://8b85319c46f7b82bbd7af014e64d162ad75c74f0-<model-port>.dstack-pha-prod10.phala.network"
    spawntee-port: 9010
    request-timeout: 60
    instance-type: "tdx.medium"      # 2 vCPU, 4 GB RAM â€” for auto-provisioned runners
    memory-per-model-mb: 1024        # 1 GB per model container
    provision-factor: 0.8            # provision new CVM at 80% of calculated max
    max-models: 20                   # global cap across the entire cluster

watcher:
  interval: 10
  poller:
    type: yaml
    path: "model_orchestrator/data/models-phala-test.yml"

crunches:
  - id: "bird_tracker"
    name: "bird tracker"
    infrastructure:
      zone: "phala"
